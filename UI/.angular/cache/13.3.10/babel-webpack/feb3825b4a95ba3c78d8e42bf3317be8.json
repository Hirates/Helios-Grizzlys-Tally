{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Confirmable } from 'src/app/_decorators/confirmable.decorator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/_services/socket.service\";\nimport * as i3 from \"src/app/_services/navbar-visibility.service\";\nimport * as i4 from \"src/app/_services/locationBack.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction ErrorReportsListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ErrorReportsListComponent_div_4_div_2_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const errorReport_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"value\", errorReport_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", errorReport_r5.datetime, \" \", ctx_r4.unread_error_reports.includes(errorReport_r5.id) ? \"(unread)\" : \"\", \"\");\n  }\n}\n\nfunction ErrorReportsListComponent_div_4_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"select\", 10);\n    i0.ɵɵlistener(\"change\", function ErrorReportsListComponent_div_4_div_2_Template_select_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.selectErrorReport($event);\n    });\n    i0.ɵɵelementStart(2, \"option\", 11);\n    i0.ɵɵtext(3, \"-- Select an error report --\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ErrorReportsListComponent_div_4_div_2_option_4_Template, 2, 3, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 13)(6, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ErrorReportsListComponent_div_4_div_2_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.markErrorReportsAsRead();\n    });\n    i0.ɵɵtext(7, \"Mark all as read\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ErrorReportsListComponent_div_4_div_2_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.deleteEveryErrorReport();\n    });\n    i0.ɵɵtext(9, \"Permanently delete every bug report from disk\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.socketService.errorReports);\n  }\n}\n\nfunction ErrorReportsListComponent_div_4_h2_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 17);\n    i0.ɵɵtext(1, \"Hurray! No error report detected.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ErrorReportsListComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 6);\n    i0.ɵɵtemplate(2, ErrorReportsListComponent_div_4_div_2_Template, 10, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ErrorReportsListComponent_div_4_h2_3_Template, 2, 0, \"h2\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.socketService.errorReports.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.socketService.errorReports.length == 0);\n  }\n}\n\nexport class ErrorReportsListComponent {\n  constructor(router, socketService, navbarVisibilityService, locationBackService) {\n    this.router = router;\n    this.socketService = socketService;\n    this.navbarVisibilityService = navbarVisibilityService;\n    this.locationBackService = locationBackService;\n    this.unread_error_reports = [];\n    this.errorReportsLoaded = false;\n    this.socketService.socket.on('unread_error_reports', list => {\n      list.forEach(report => {\n        this.unread_error_reports.push(report.id);\n      });\n      this.errorReportsLoaded = true;\n    });\n    this.socketService.socket.emit('get_unread_error_reports');\n  }\n\n  selectErrorReport(id) {\n    this.router.navigate([\"/\", \"errors\", id.target.value]);\n  }\n\n  markErrorReportsAsRead() {\n    this.socketService.socket.emit('mark_error_reports_as_read');\n  }\n\n  deleteEveryErrorReport() {\n    this.socketService.socket.emit('delete_every_error_report');\n  }\n\n  ngOnInit() {}\n\n}\n\nErrorReportsListComponent.ɵfac = function ErrorReportsListComponent_Factory(t) {\n  return new (t || ErrorReportsListComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.SocketService), i0.ɵɵdirectiveInject(i3.NavbarVisibilityService), i0.ɵɵdirectiveInject(i4.LocationBackService));\n};\n\nErrorReportsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ErrorReportsListComponent,\n  selectors: [[\"app-error-reports-list\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[\"class\", \"d-flex justify-content-center mt-5 pt-5\", 4, \"ngIf\"], [\"title\", \"Go back\", 1, \"btn\", \"btn-outline-primary\", 2, \"margin\", \"10px\", 3, \"click\"], [1, \"fas\", \"fa-arrow-left\"], [4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"mt-5\", \"pt-5\"], [1, \"spinner\", \"spinner-border\"], [1, \"container\", \"mt-5\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"class\", \"lead mt-5 text-center\", 4, \"ngIf\"], [1, \"form-group\"], [1, \"form-control\", \"col-xs-6\", \"col-md-3\", 3, \"change\"], [\"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"buttons_div\", 1, \"text-center\"], [1, \"btn\", \"btn-outline-success\", 3, \"click\"], [1, \"btn\", \"btn-outline-danger\", 2, \"margin-left\", \"10px\", 3, \"click\"], [3, \"value\"], [1, \"lead\", \"mt-5\", \"text-center\"]],\n  template: function ErrorReportsListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ErrorReportsListComponent_div_0_Template, 2, 0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function ErrorReportsListComponent_Template_button_click_1_listener() {\n        return ctx.locationBackService.goBack();\n      });\n      i0.ɵɵelement(2, \"i\", 2);\n      i0.ɵɵtext(3, \" Back\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, ErrorReportsListComponent_div_4_Template, 4, 2, \"div\", 3);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.errorReportsLoaded);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorReportsLoaded);\n    }\n  },\n  directives: [i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i5.NgForOf],\n  styles: [\"#buttons_div[_ngcontent-%COMP%]{margin-top:10px;display:flex;align-content:center;justify-content:center}\"]\n});\n\n__decorate([Confirmable(\"Are you sure you want to delete all error reports? This can not be undone.\")], ErrorReportsListComponent.prototype, \"deleteEveryErrorReport\", null);","map":null,"metadata":{},"sourceType":"module"}